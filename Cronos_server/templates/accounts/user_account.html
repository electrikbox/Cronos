{% extends 'user_logged.html' %}
{% load static %}

{% block title %}Cronos User Account{% endblock %}

{% block section %}
<h2>Your account</h2>

<div class="success_msg">
{% if request.GET.updated %}
  <p class="success_updated">Your personal details have been successfully modified</p>
{% endif %}
</div>

<div class="success_msg">
{% if request.GET.updatedPWD %}
  <p class="success_updated">Your password has been successfully changed</p>
{% endif %}
</div>

<div class="success_msg">
{% if request.GET.updatedIMG %}
  <p class="success_updated">Your profile pic has been successfully uploaded</p>
{% endif %}
</div>

{% for message in messages %}
    <p class="error_msg">{{ message }}</p>
{% endfor %}


<!-- ================= PIC FORM ================= -->
<div class="user_form_container">
<div class="profile_pic">
	<div class="pic">
		<img src="{{ image_url }}" alt="pic">
	</div>
	<form class="user_pic_form" method="POST" enctype="multipart/form-data">
		 {% csrf_token %}
		 <p id="file-name-display">No file selected</p>
		 <div class="pic_button">
			<label for="input_profile_img">Browse</label>
            <input id="input_profile_img" type="file" name="profile_img" accept="image/*" class="form-img">
			<input type="submit" value="Upload">
		</div>
		<p class="help-text">Max size: 2 MB</p>
        <p class="help-text">Formats: JPG, JPEG, PNG</p>
	</form>
</div>


<!-- ================= PERSONAL DETAILS FORM ================= -->

	<div class="personal">
		<div class="account_title">
			<ion-icon name="planet-outline"></ion-icon>
			<h3>Your personal details</h3>
		</div>
		<form class="user_account_form" method="POST">
			{% csrf_token %}
			<label for="username">Your username</label>
			{{ user_account_form.username }}

			<label for="email">Your email</label>
			{{ user_account_form.email }}

			<label for="first_name">Your first name</label>
			{{ user_account_form.first_name }}

			<label for="last_name">Your last name</label>
			{{ user_account_form.last_name }}

			<input type="submit" value="Save your changes">
		</form>
	</div>

<!-- ================= CHANGE PWD FORM ================= -->
	<div class="security">
		<div class="account_title">
			<ion-icon name="lock-closed-outline"></ion-icon>
			<h3>Security</h3>
		</div>
		<form class="user_pwd_form" method="POST">
			{% csrf_token %}
			<label for="old_password">Your old password</label>
			{{ user_pwd_form.old_password }}

			<label for="new_password">Your new password</label>
			{{ user_pwd_form.new_password }}

			<label for="new_password2">Confirm your new password</label>
			{{ user_pwd_form.new_password2 }}

			<input type="submit" value="Change your password">
		</form>
	</div>

</div>
{% endblock %}
